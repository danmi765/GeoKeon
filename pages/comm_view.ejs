
<%
let comm_name ;
if(models.comm_name == 'notice'){
    comm_name = 'BOARD_NOTICE';
}else if(models.comm_name == 'inquiry'){
    comm_name = 'BOARD_INQUIRY';
}
console.log('comms models:', models);
%>

    <h2 class="contents_title"><%= models.page_title %></h2>
        <div class="contents_area">
            <div class="comm_contents">
                <table id="comm_view_table">
                    <tbody>
                        <tr class="comm_view_title">
                            <th>제목</th>
                            <td colspan="3"><%= models.comms[comm_name+'_TITLE'] %></td>
                        </tr>
                        <tr>
                            <th>작성자</th>
                            <td><%= models.comms[comm_name+'_WRITER'] %></td>
                            <th>작성일</th>
                            <td><%= models.comms[comm_name+'_DATE'] %></td>
                        </tr>
                        <tr class="comm_view_content">
                            <td colspan="4" class="comm_view_textarea"><%- models.comms[comm_name+'_CONTENT'] %></td>
                        </tr>
                    <%
                        // 문의사항 게시판에 대해서만 댓글 허용
                        if(models.comm_name == 'inquiry'){
                    %>
                        <tr class="comm_comment_header">
                            <th colspan="4">댓글</th>
                        </tr>
                        <tr class="comm_comment_area">
                            <td colspan="4">
                            <%
                                console.log('comms locals:', locals.authId);
                                /* 로그인 된 회원만 댓글작성가능 */
                                if(locals.authId){
                                    console.log('#### true');
                            %>
                                <div class="comm_comment_write_area">
                                    <textarea rows="4"></textarea>
                                    <button class="gk_simple1_btn" onClick="submitComment('<%=locals.authId%>', '<%=models.comm_name%>', '<%=models.comms[comm_name+'_ID']%>')">등록</button>
                                </div>
                            <% } %>
                            </td>
                        </tr>
                    <% } %>
                    </tbody>
                </table>
                <div class="comm_view_btn_area">
                    <form method="post" action="/comm_remove/<%=models.comm_name%>&<%= models.comms[comm_name+'_ID']%>">
                        <button onclick="location.href='/comm/<%=models.comm_name%>'" type="button" title="목록" class="comm_view_list_btn gk_simple1_btn">목록</button>
                        <%
                            // 로그인 후 세션에 존재하는 userId와 res.render할때 models객체에 담겨있는 글쓴이가 일치한다면...
                            if(locals.authId === models.comms.BOARD_NOTICE_WRITER){
                        %>
                            <button onclick="location.href='/comm_modify/<%=models.comm_name%>&<%=models.comms[comm_name+'_ID']%>'" type="button" title="수정" class="comm_view_modi_btn gk_simple1_btn">수정</button>
                            <button type="submit" title="삭제" class="comm_view_del_btn gk_simple1_btn">삭제</button>
                        <% } %>
                    </form>
                </div>
            </div> <!-- comm_contents End -->
        </div> <!-- contents_area End -->
        <script>
            $(window).on("load", function(){
                listComment('<%=locals.authId%>', '<%=models.comm_name%>', '<%=models.comms[comm_name+"_ID"]%>');
            })
        </script>